<script>
  const params = new URLSearchParams(window.location.search);
  const code = params.get("code");
  const codeBox = document.getElementById("codeBox");
  const copyBtn = document.getElementById("copyBtn");

  if (!code) {
    codeBox.textContent = "❌ No code found in URL.";
    copyBtn.disabled = true;
  } else {
    codeBox.textContent = code;

    copyBtn.onclick = () => {
      navigator.clipboard.writeText(code).then(() => {
        copyBtn.textContent = "✅ Copied!";
        setTimeout(() => {
          window.close(); // Close the tab after copy
        }, 500); // Small delay to show "Copied!" before closing
      });
    };
  }
</script>
