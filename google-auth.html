<script>
  const params = new URLSearchParams(window.location.search);
  const code = params.get("code");
  const codeBox = document.getElementById("codeBox");
  const copyBtn = document.getElementById("copyBtn");

  if (!code) {
    codeBox.textContent = "âŒ No code found in URL.";
    copyBtn.disabled = true;
  } else {
    codeBox.textContent = code;

    // Automatically copy to clipboard
    navigator.clipboard.writeText(code).then(() => {
      copyBtn.textContent = "âœ… Copied!";
      setTimeout(() => (copyBtn.textContent = "ðŸ“‹ Copy Code"), 2000);
    });

    // Optional: still allow manual copy via button
    copyBtn.onclick = () => {
      navigator.clipboard.writeText(code).then(() => {
        copyBtn.textContent = "âœ… Copied!";
        setTimeout(() => (copyBtn.textContent = "ðŸ“‹ Copy Code"), 2000);
      });
    };
  }
</script>
