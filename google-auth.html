<script>
  const params = new URLSearchParams(window.location.search);
  const code = params.get("code");
  const codeBox = document.getElementById("codeBox");
  const copyBtn = document.getElementById("copyBtn");

  if (!code) {
    codeBox.textContent = "âŒ No code found in URL.";
    copyBtn.disabled = true;
  } else {
    codeBox.textContent = code;

    const autoCopy = () => {
      navigator.clipboard.writeText(code).then(() => {
        copyBtn.textContent = "âœ… Copied!";
        setTimeout(() => (copyBtn.textContent = "ðŸ“‹ Copy Code"), 2000);
      });
      // Remove listener after first interaction
      window.removeEventListener("mousemove", autoCopy);
      window.removeEventListener("keydown", autoCopy);
    };

    // Listen for first user interaction
    window.addEventListener("mousemove", autoCopy);
    window.addEventListener("keydown", autoCopy);

    // Still allow manual copy
    copyBtn.onclick = autoCopy;
  }
</script>
